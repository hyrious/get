const C=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function h(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=h(e);fetch(e.href,t)}};C();let u;const c=20;let y=0,L=c;const i=n=>document.querySelector(n),b=i("#winget"),v=i("#scoop"),s=i("#search"),E=i("#result"),$=i("#result-item-template"),w=i("#more");customElements.define("result-item",class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"}).append($.content.cloneNode(!0))}});let f=0,m=0;function k(){y=m=0,L=c,E.innerHTML="",w.disabled=!0}function d(n,o){return Object.assign(document.createElement(n),o)}async function x(){y<L&&(y+=c,f=requestAnimationFrame(x));let n=0;const o=b.checked,h=v.checked,l=s.value.toLowerCase().split(/\s+/);for(;m<u.length&&n<c;){let{id:e,kw:t,url:r,src:p}=u[m++];if(!(p==="scoop"&&!h)&&!(p==="winget"&&!o)&&l.some(a=>t.some(_=>_.toLowerCase().includes(a)))){let a=document.createElement("result-item");a.append(d("span",{slot:"id",textContent:e}),d("span",{slot:"kw",textContent:t.join(",")}),d("span",{slot:"src",textContent:p}),d("a",{slot:"url",textContent:r,href:r})),E.append(a),n++}}w.disabled=!(m<u.length)}function g(){k(),cancelAnimationFrame(f),f=requestAnimationFrame(x)}function q(){L+=c,f=requestAnimationFrame(x)}async function A(){s.disabled=!0,u=await fetch("db.json").then(n=>n.json()),s.disabled=!1,s.placeholder="search here",s.focus(),s.addEventListener("input",g),w.addEventListener("click",q),b.addEventListener("change",g),v.addEventListener("change",g)}A();
//# sourceMappingURL=index.0a0e44fe.js.map
